<!DOCTYPE html>
<html>
<head>
<!-- include header portion page -->
  <% include ./_head %>

  <!-- nav bar -->
  <% include ./_nav %>

</head>
<body>
<%var owner = false; %>
  <!-- heading -->
  <div class="jumbotron">
    <div class="container text-center">
      <% if(owner) { %>
      <h1>Pray for me!</h1>
      <% } else { %>
      <h1>Welcome!</h1>
      <h3>Use this page to manage prayer requests.</h3>
      <% } %>      
    </div>
  </div>

  <!-- input forms -->
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-md-offset-3">
        <div class="switch">
        <a class="btn btn-default" id="view-public" href="#" role="button">Switch view</a>
        </div>
        <!-- only show when public is false -->
        <% if(!owner) { %>
        <form class="form-inline" id="new-request" data-id="<%=user._id%>">
          <div class="input-group">
            <input type="text" class="form-control" id="new-request-input" placeholder="Enter new prayer request..." name="description" aria-describedby="basic-addon2">
            <button type="submit" class="input-group-addon" id="basic-addon2">Submit</button>
          </div>
        </form>
        <% } %>
      </div>
    </div>
  </div>

  <!-- lists of prayer requests -->
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2 requests">
        <ul class=" active list-unstyled">
          <% for(var i = user.requests.length; i>0; i--) { %>
            <% if(!user.requests[i].completed) { %>
              <li class="well"><%=user.requests[i].description%>
                <br>
                <br>
                <!-- if public view is false -->
                <% if(!owner) { %>
                <input class="answered" type="button" value="Move to answered prayers"></input>
                <br>
                <br>
                <input class="delete" type="button" value="Delete"></input>
                <% } else { %>
                <!-- if public view is true -->
                  <span class="prayer-count">
                  <p><strong>Prayed for <%= user.requests[i].count %> times</strong></p>
                  <label><button type="button" class="btn btn-default btn-xs count">I prayed for this request</button></label>
                  </span>
                <% } %>
              </li>
            <% } %>
          <% } %>
        </ul>
        <ul class=" completed list-unstyled">
          <% for(var i = user.requests.length - 1; i>=0; i--) { %>
            <% if(user.requests[i].completed) { %>
              <li class="well"><%=user.requests[i].description%>
                <br>
                <br>
                  <!-- if public view is false -->
                  <% if(!owner) { %>
                    <input class="delete" type="button" value="Delete"></input>
                  <% } else { %>
                  <!-- if public view is true -->
                    <p>Prayed for <%= user.requests[i].count %> times</p>
                  <% } %>
              </li>
            <% } %>
          <% } %>
        </ul>
      </div>
    </div>
  </div>
</body>
</html>
